!function(a,b){"function"==typeof define&&define.amd?define(["google","angular"],function(a,c){return b(a,c)}):"object"==typeof exports?module.exports=b(require("google"),require("angular")):b(google,angular)}(this,function(a,b){!function(a){"use strict";a.module("LogicifyGMap",[])}(b),function(b){"use strict";b.module("LogicifyGMap").directive("gmapAutoComplete",["$compile","$log","$timeout","GmapSmallUtil",function(c,d,e,f){return{restrict:"E",require:"^logicifyGmap",link:function(g,h,i,j){g.placeHolder=g.$eval(i.autoCompletePlaceHolder),g.isTypesSelectorsVisible=g.$eval(i.enableAutoCompleteTypeSelectors),g.defaultZoomOnPlaceChange=g.$eval(i.defaultZoomOnPlaceChange),g.onPlaceChanged=g.$eval(i.gmapOnPlaceChanged),g.enableDefaultMarker=g.$eval(i.enableDefaultMarker);var k=new a.maps.Geocoder,l=g.$eval(i.autoCompleteControlPosition),m=j.getMap(),n=b.element('<input id="gmap-auto-complete-input" type="text" placeholder="{{placeHolder}}">'),o=b.element('<div id="gmap-type-selector"><input class="gmap-autocomplete-type-selector" type="radio" name="type" id="gmap-changetype-all" checked="checked"><label for="gmap-changetype-all">All</label><input class="gmap-autocomplete-type-selector" type="radio" name="type" id="gmap-changetype-establishment"><label for="gmap-changetype-establishment">Establishments</label><input class="gmap-autocomplete-type-selector" type="radio" name="type" id="gmap-changetype-address"><label for="gmap-changetype-address">Addresses</label><input class="gmap-autocomplete-type-selector" type="radio" name="type" id="gmap-changetype-geocode"><label for="gmap-changetype-geocode">Geocodes</label></div>');h[0].innerHTML.trim().length<1&&(c(n)(g),h.append(n),g.isTypesSelectorsVisible&&(c(o)(g),h.append(o)),e(function(){}));var p=b.element(document.querySelector("#gmap-auto-complete-input")),q=b.element(document.querySelector("#gmap-type-selector"));if(p.length<1)throw new Error("There's no text input in your html.");var r=f.getControlPosition(l);if(a.maps.ControlPosition.hasOwnProperty(r)){var s=b.element('<div class="autocomplete-control-container"></div>');s.append(p),m.controls[a.maps.ControlPosition[r]].push(s[0]),g.isTypesSelectorsVisible===!0&&s.append(q)}else h.append(p),g.isTypesSelectorsVisible===!0&&h.append(q);var t=new a.maps.places.Autocomplete(p[0]);t.bindTo("bounds",m),g.enableDefaultMarker&&(g.marker=new a.maps.Marker({map:m})),t.addListener("place_changed",function(){var a=t.getPlace();"function"==typeof g.onPlaceChanged&&g.onPlaceChanged(m,a,p[0].value),a.geometry&&(a.geometry.viewport?m.fitBounds(a.geometry.viewport):(m.setCenter(a.geometry.location),m.setZoom(g.defaultZoomOnPlaceChange||17)),g.marker&&(g.marker.setPosition(a.geometry.location),g.marker.setVisible(!0)))}),g.$on("gmap-auto-complete:reverse",function(b,c){if(c instanceof a.maps.LatLng){var e="";k.geocode({latLng:c},function(b,c){c==a.maps.GeocoderStatus.OK&&b.length>0&&(e=b[0].formatted_address,"function"==typeof g.onReverseAddressComplete&&(e=g.onReverseAddressComplete(b)||e),p.val(e))})}else d.error("For reverse auto complete you should pass an instance of google.maps.LatLng!")})}}}])}(b),function(b){"use strict";b.module("LogicifyGMap").directive("gmapColorPicker",["$compile","$http","$log","$templateCache","GmapSmallUtil",function(c,d,e,f,g){return{restrict:"EA",require:["^logicifyGmap","^logicifyGmapDraw","^gmapExtendedDraw"],link:function(h,i,j,k){function l(){var a=b.element('<input type="color" value="!"/>')[0];return"color"===a.type&&"!"!==a.value}function m(d){var e=b.element(d),f=g.getControlPosition(u);return a.maps.ControlPosition.hasOwnProperty(f)?q.controls[a.maps.ControlPosition[f]].push(e[0]):i.append(e),e&&c(e)(h),e}var n=k[0],o=k[2],p=[],q=n.getMap(),r=h.$eval(j.onColorOrOpacityChanged),s=h.$eval(j.overrideDestinations),t=h.$eval(j.enableOpacityRange),u=h.$eval(j.colorPickerControlPosition),v=h.$eval(j.gmapColorPickerTemplateUrl),w=h.$eval(j.gmapColorPickerTemplate);if(h.$on("$destroy",function(){p.forEach(n.detachListener)}),h.destinations=[{name:"Fill",color:{property:"fillColor",value:"#000000"},opacity:{property:"fillOpacity",value:100}},{name:"Border",color:{property:"strokeColor",value:"#000000"},opacity:{property:"strokeOpacity",value:100}}],"function"==typeof s&&(h.destinations=s(h.destinations)),!Array.isArray(h.destinations)&&h.destinations.length>0)throw new Error("Destinations shouldn't be an empty array");if(h.destinations.forEach(function(a){o.setColor(a.color.property,a.color.value),o.setOpacity(a.opacity.property,a.opacity.value)}),h.destination=0,h.onSelectColor=function(){o.setColor(h.destinations[h.destination].color.property,h.destinations[h.destination].color.value),"function"==typeof r&&r(h.destinations[h.destination].color)},h.onSelectOpacity=function(){o.setOpacity(h.destinations[h.destination].opacity.property,h.destinations[h.destination].opacity.value),"function"==typeof r&&r(h.destinations[h.destination].opacity)},h.toggleDestination=function(){0===h.destination?h.destination=1:h.destination=0},v)d.get(v,{cache:f}).then(function(a){m(a.data)});else if(w)m(w);else{if(!l())return e.error("Your browser doesn'nt support HTML5 color inputs."),void h.$destroy();var x="";t===!0&&(x='<input min="1" max="100" type="range" ng-change="onSelectOpacity()" ng-model="destinations[destination].opacity.value"/>'),m('<div class="gmap-color-picker-container"><button class="toggle-color-button" ng-click="toggleDestination()" ng-bind="destinations[destination].name"></button><input type="color" ng-model="destinations[destination].color.value" ng-change="onSelectColor()"/>'+x+"</div>")}}}}])}(b),function(b){"use strict";b.module("LogicifyGMap").directive("gmapExtendedDraw",["$timeout","$http","$templateCache","$log","$q","$compile",function(c,d,e,f,g,h){return{restrict:"EA",require:["^logicifyGmap","^logicifyGmapDraw"],controller:function(a,b,c){var d=this;a.defaultColors={},a.defaultOpacity={},a.isColorPickerEnabled=!1,d.setColor=function(b,c){a.isColorPickerEnabled=!0,a.defaultColors[b]=c,a.setDefault(a.defaultOpacity,a.defaultColors)},d.getColor=function(b){return a.defaultColors[b]},d.setOpacity=function(b,c){a.defaultOpacity[b]=c/100,a.setDefault(a.defaultOpacity,a.defaultColors)},d.getOpacity=function(b){return a.defaultOpacity[b]}},link:function(c,f,g,i){function j(a){return c.isColorPickerEnabled!==!0?a:Array.isArray(a)?void a.forEach(function(a){a.icon.strokeOpacity=c.defaultOpacity.strokeOpacity,a.icon.strokeColor=c.defaultColors.strokeColor}):[]}function k(d,e){if("marker"!==e&&"circle"!==e){var f,g=null,h=b.copy(c.currentLineType.icons);if(j(h),"polyline"!==e&&Array.isArray(c.currentLineType.icons)&&c.currentLineType.icons.length>0){switch(e){case"polygon":g=d.getPath().getArray(),g.push(g[0]);break;case"rectangle":var i=d.bounds.getNorthEast(),k=d.bounds.getSouthWest(),l=new a.maps.LatLng(i.lat(),k.lng()),m=new a.maps.LatLng(k.lat(),i.lng());g=[i,l,k,m,i]}f=new a.maps.Polyline({path:g}),f.set("icons",h),f.setOptions(c.currentLineType.parentOptions),d.setOptions(c.currentLineType.parentOptions),c.isColorPickerEnabled===!0&&(f.set("strokeColor",c.defaultColors.strokeColor),d.set("fillColor",c.defaultColors.fillColor),d.set("fillOpacity",c.defaultOpacity.fillOpacity),d.set("strokeOpacity",0)),f.setMap(o),d.border=f}else d.set("icons",h),d.setOptions(c.currentLineType.parentOptions),c.defaultColors&&d.set("strokeColor",c.defaultColors.strokeColor),c.isColorPickerEnabled===!0&&(d.set("fillOpacity",c.defaultOpacity.fillOpacity),Array.isArray(h)&&h.length<1&&d.set("strokeOpacity",c.defaultOpacity.strokeOpacity));"function"==typeof t&&t.apply(d,[c.currentLineType])}else c.isColorPickerEnabled===!0&&(d.setOptions(c.defaultColors),d.setOptions(c.defaultOpacity))}function l(d){var e=b.element(d);return"string"!=typeof s?Object.keys(a.maps.ControlPosition).forEach(function(b){a.maps.ControlPosition[b]==s&&(x=b)}):x=s,a.maps.ControlPosition.hasOwnProperty(x)?(x.indexOf("BOTTOM")>-1&&e.attr("dropup",!0),o.controls[a.maps.ControlPosition[x]].push(e[0])):f.append(e),e&&h(e)(c),e}var m=i[0],n=i[1],o=m.getMap(),p=[],q=n.getDrawingManager(),r=c.$eval(g.overrideLineTypes),s=c.$eval(g.lineTypesControlPosition),t=c.$eval(g.onAfterDrawingOverlay),u=c.$eval(g.gmapDropdownTemplateUrl),v=c.$eval(g.gmapDropdownTemplate);c.$on("$destroy",function(){p.forEach(m.detachListener)}),c.setDefault=function(a,c){var d=q.get("circleOptions")||{},e=q.get("rectangleOptions")||{},f=q.get("polygonOptions")||{},g=q.get("polylineOptions")||{},h=q.get("markerOptions"),i={circleOptions:d,rectangleOptions:e,polygonOptions:f,polylineOptions:g,markerOptions:h},j={};b.extend(j,a,c),b.extend(i,{circleOptions:j,rectangleOptions:j,polygonOptions:j,polylineOptions:j}),q.setOptions(i)};var w={dashed:{path:"M 0,-1 0,1",strokeOpacity:1},arrow:{path:a.maps.SymbolPath.FORWARD_CLOSED_ARROW,strokeOpacity:1},dotted:{path:"M 0,-1 0,1",strokeOpacity:1,strokeWeight:4,scale:.2}};if(c.polyLineTypes=[{name:"-----",icons:[],parentOptions:{strokeOpacity:1}},{name:"---->",icons:[{icon:w.arrow,offset:"100%",repeat:"none"}],parentOptions:{strokeOpacity:1}},{name:"· · · ·",icons:[{icon:w.dotted,offset:"0",repeat:"20px"}],parentOptions:{strokeOpacity:0}},{name:"- - - -",icons:[{icon:w.dashed,offset:"0",repeat:"20px"}],parentOptions:{strokeOpacity:0}},{name:"· · ·>",icons:[{icon:w.arrow,offset:"100%",repeat:"none"},{icon:w.dotted,offset:"0",repeat:"20px"}],parentOptions:{strokeOpacity:0}},{name:"- - ->",icons:[{icon:w.arrow,offset:"100%",repeat:"none"},{icon:w.dashed,offset:"0",repeat:"20px"}],parentOptions:{strokeOpacity:0}}],"function"==typeof r&&(c.polyLineTypes=r(c.polyLineTypes)),!Array.isArray(c.polyLineTypes)||c.polyLineTypes.length<1)throw new Error("Line types array can't be null or empty. If you are overriding line types please ensure that callback returns new array!");c.currentLineType=c.polyLineTypes[0];var x=null;c.onSelectPolyLineType=function(a){c.currentLineType=a},u?d.get(u,{cache:e}).then(function(a){l(a.data)}):l(v?v:'<div gmap-dropdown gmap-dropdown-items="polyLineTypes" on-dropdown-select-item="onSelectPolyLineType"></div>'),p.push(a.maps.event.addListener(q,"overlaycomplete",function(a){k(a.overlay,a.type)}))}}}])}(b),function(b){"use strict";b.module("LogicifyGMap").directive("logicifyGmapDraw",["$timeout","$log","$q","$compile",function(c,d,e,f){return{restrict:"E",require:"^logicifyGmap",scope:{gmapEvents:"&gmapEvents",drawOptions:"&drawOptions"},controller:function(b,c,d){var e=this,f={drawingMode:a.maps.drawing.OverlayType.MARKER,drawingControl:!0,drawingControlOptions:{position:a.maps.ControlPosition.TOP_CENTER,drawingModes:[a.maps.drawing.OverlayType.MARKER,a.maps.drawing.OverlayType.CIRCLE,a.maps.drawing.OverlayType.POLYGON,a.maps.drawing.OverlayType.POLYLINE,a.maps.drawing.OverlayType.RECTANGLE]}},g=b.drawOptions()||f,h=new a.maps.drawing.DrawingManager(g);b.drawingManager=h,e.getDrawingManager=function(){return b.drawingManager},e.getDrawOptions=function(){return b.drawOptions()},e.getEvents=function(){return b.gmapEvents()}},link:function(c,d,e,f){function g(b,d){return a.maps.event.addListener(c.drawingManager,d,b)}function h(c){j&&j.overlays&&b.forEach(j.overlays,function(b,d){"function"==typeof b&&l.push(a.maps.event.addListener(c,d,function(a){var c=this;b.apply(c,[a,i])}))})}if(null==a.maps.drawing||null==a.maps.drawing.DrawingManager)throw new Error('"Drawing" API of google maps is not available! Probably you forgot load it. Please check google maps spec. to load "Drawing" API.');var i=f.getMap(),j=c.gmapEvents(),k=[],l=[];c.$on("$destroy",function(){k.forEach(f.detachListener),l.forEach(f.detachListener)}),c.drawingManager.setMap(i),j&&(j.drawing&&b.forEach(j.drawing,function(a,b){"function"==typeof a&&k.push(g(a,b))}),j.overlays&&k.push(a.maps.event.addListener(c.drawingManager,"overlaycomplete",function(a){h(a.overlay)})))}}}])}(b),function(a){"use strict";a.module("LogicifyGMap").directive("gmapDropdown",["$compile",function(b){return{restrict:"EA",link:function(c,d,e,f){c.dropDownItems=c.$eval(e.gmapDropdownItems)||[],c.onItemSelected=c.$eval(e.onDropdownSelectItem);var g=c.$eval(e.dropup);c.current=c.dropDownItems[0];var h=null;c.onSelectItemLocally=function(b){"function"==typeof c.onItemSelected&&c.onItemSelected(b),h||(h=a.element(d[0].getElementsByClassName("gmap-nav"))),h.addClass("clicked"),c.current=b},d.addClass("gmap-dropdown-holder");var i="";g===!0?i="dropup":void 0,d[0].innerHTML='<div class="gmap-nav '+i+'"><div class="gmap-dropdown-header" ng-bind="current.name||current"></div><ul><li ng-repeat="item in dropDownItems" ng-click="onSelectItemLocally(item)"><a ng-bind="item.name || item"></a></li></ul></div>',b(d.contents())(c),a.element(d[0].getElementsByClassName("gmap-dropdown-header")).on("mouseover",function(){h||(h=a.element(d[0].getElementsByClassName("gmap-nav"))),h.removeClass("clicked")})}}}])}(b),function(a,b){"use strict";b.module("LogicifyGMap").directive("logicifyGmapControl",["$compile","$log","$timeout",function(c,d,e){return{restrict:"E",require:"^logicifyGmap",scope:{controlPosition:"&controlPosition",controlIndex:"&controlIndex",events:"&events"},link:function(d,f,g,h){function i(b,c){return a.maps.event.addDomListener(m[0],b,function(){var a=arguments,b=this;e(function(){c.apply(b,a)})})}var j=d.controlPosition(),k=d.controlIndex(),l=d.events(),m=b.element(f.html().trim()),n=[],o=[];c(m)(d),e(function(){d.$apply()}),d.$on("$destroy",function(){n.forEach(function(b){a&&a.maps&&a.maps.event.removeListener(b)}),o.forEach(function(a){a.unbind("onchange")})}),m[0].index=k||0,f.html("");var p=h.getMap();if(!p.controls[j])throw new Error("Position of control on the map is invalid. Please see google maps spec.");p.controls[j].push(m[0]),null!=l&&b.forEach(l,function(a,b){"function"==typeof a&&("fileSelect"===b?m[0]instanceof HTMLInputElement&&"file"===m[0].type?o.push(m.bind("change",function(){a(this.files[0])})):o.push(m.find("input:file").bind("change",function(){a(this.files[0])})):n.push(i(b,a)))})}}}])}(a,b),function(a,b){"use strict";b.module("LogicifyGMap").directive("logicifyGmap",["$compile","$log","$timeout",function(c,d,e){return{restrict:"E",scope:{gmOptions:"&gmOptions",gmReady:"&gmReady",cssOptions:"&cssOptions"},controller:function(d,f,g){var h=this,i=d.gmOptions(),j=d.gmReady(),k={zoom:8,center:new a.maps.LatLng(-34.397,150.644)},l=d.cssOptions();i=i||{};var m={height:"100%",width:"100%",position:"absolute"};h.detachListener=function(b){a&&a.maps&&a.maps.event.removeListener(b)},b.extend(m,l),b.extend(k,i),f.css(m);var n=b.element("<div>");n.css({height:"100%",width:"100%",margin:0,padding:0}),f.append(n);var o=new a.maps.Map(n[0],k);return h.getMap=function(){return o},"function"==typeof j&&j(o),o.openInfoWnd=function(a,b,f,g,h){if(h.apply(g,[b,f]),g.$scope&&g.$compiled)e(function(){g.$scope.$apply()});else{var i=d.$new();i.$infoWND=g,g.$scope=i,e(function(){i.$apply()})}if(g.$compiled!==!0){var j=c(a.trim())(g.$scope);g.$compiled=!0,g.setContent(j[0])}},o.closeInfoWnd=function(a,b){a.$scope&&(a.$compiled=!1,a.$scope.$destroy(),delete a.$scope,delete a.$compiled),b.apply(a,[])},h}}}])}(a,b),function(a,b){"use strict";b.module("LogicifyGMap").directive("xmlOverlays",["$timeout","$log","$q","$compile","$http","SmartCollection",function(c,d,e,f,g,h){return{restrict:"E",require:"^logicifyGmap",scope:{kmlCollection:"=kmlCollection",gmapEvents:"&gmapEvents",parserOptions:"&parserOptions",onProgress:"&onProgress",fitAllLayers:"&fitAllLayers",infoWindow:"=infoWindow"},link:function(f,i,j,k){function l(a,c){var d={};return b.extend(d,f.parserOptions),d.map=a,d.afterParse=p,d.onAfterCreateGroundOverlay=f.events.onAfterCreateGroundOverlay,d.onAfterCreatePolygon=f.events.onAfterCreatePolygon,d.onAfterCreatePolyLine=f.events.onAfterCreatePolyLine,d.failedParse=q,d.infoWindow=c,d}function m(){return f.$watch("kmlCollection._uid",function(a,b){(null==a||a!=z)&&(f.kmlCollection instanceof h||(f.kmlCollection=new h(f.kmlCollection)),z=f.kmlCollection._uid,(f.busy===!0||y.docs&&y.docs.length>0)&&(A.forEach(function(a){a._abort()}),A.splice(0,A.length),s()),t().then(function(){A.splice(0,A.length)}))})}function n(a){null!=a&&w(a).then(function(a){1!=f.kmlCollection.length&&f.fitBoundsAfterAll!==!1&&r()})}function o(a){s(a)}function p(a,b){a[0].$uid=(new Date).getTime()+"-index-"+Math.floor(-9*Math.random()),"function"==typeof f.events.onAfterParse&&f.events.onAfterParse(a),b&&b.resolve(a)}function q(a,b){b&&b.reject(a),"function"==typeof f.events.onAfterParseFailed&&f.events.onAfterParseFailed(a)}function r(){f.globalBounds=new a.maps.LatLngBounds,1!=f.kmlCollection.length&&f.fitBoundsAfterAll!==!1?(f.kmlCollection.forEach(function(a){a.doc&&f.globalBounds.extend(a.doc[0].bounds.getCenter())}),c(function(){f.gMap.fitBounds(f.globalBounds)},10)):f.kmlCollection.length>0&&f.fitBoundsAfterAll!==!1&&c(function(){f.gMap.fitBounds(f.kmlCollection[0].doc[0].bounds)},10)}function s(c){if(c){y.hideDocument(c.doc[0]);var d=y.docs.indexOf(c.doc[0]);d>-1&&(delete y.docsByUrl[c.doc[0].baseUrl],y.docs.splice(d,1),r())}else b.forEach(y.docs,function(a){y.hideDocument(a)}),y.docs.splice(0,y.docs.length),y.docsByUrl={},f.globalBounds=new a.maps.LatLngBounds}function t(){return f.kmlCollection instanceof h?(f.busy=!0,f.kmlCollection.onAddItem(n),f.kmlCollection.onRemoveItem(o),f.kmlCollection.forEach(function(a){A.push(w(a))}),e.all(A).then(function(a){r(),A.splice(0,A.length),f.busy=!1})):void 0}function u(){"function"==typeof f.onProgress&&f.onProgress({total:A.length,done:v(B.RESOLVED),errors:v(B.REJECTED)})}function v(a){var b=0;return A.forEach(function(c){c.$$state.status===a&&b++}),b}function w(a){var b=e.defer(),c=e.defer();b.promise._abort=function(){b.reject(),c.resolve()},null!=a.url?g.get(a.url,{timeout:c.promise,responseType:"arraybuffer"}).then(function(a){var c=new Blob([a.data],{type:a.headers()["content-type"]});c.lastModifiedDate=new Date,c.name="example"+c.lastModifiedDate,x(c,null,b)}):"string"==typeof a.content?x(null,a.content,b):a.file instanceof Blob?x(a.file,null,b):d.error("Incorrect file type. Should be an instance of a Blob or String (url).");var f=b.promise.then(function(b){return a.doc=b,a})["catch"](function(a){})["finally"](function(){u()});return f}function x(a,b,c){null==b?y.parse(a,null,c):y.parseKmlString(b,null,c)}if(!geoXML3)throw new Error("You should include geoxml3.js to be able to parse xml overlays. Please check that geoxml3.js file loads before logicify-gmap.js");var y=null;f.kmlCollection=new h(f.kmlCollection);var z=f.kmlCollection._uid;f.events=f.gmapEvents()||{},f.parserOptions=f.parserOptions()||{},f.onProgress=f.onProgress(),f.fitBoundsAfterAll=f.fitAllLayers(),f.infowindow=f.infoWindow;var A=[],B={PENDING:0,RESOLVED:1,REJECTED:2};f.gMap=k.getMap(),f.collectionsWatcher=m(),f.infowindow&&"function"==typeof f.infowindow.$ready?f.infowindow.$ready(function(a){y=new geoXML3.parser(l(f.gMap,a)),t()}):(y=new geoXML3.parser(l(f.gMap)),t()),f.$on("$destroy",function(){"function"==typeof f.collectionsWatcher&&f.collectionsWatcher(),A.forEach(function(a){a._abort()})})}}}])}(a,b),function(a,b){"use strict";b.module("LogicifyGMap").service("GmapSmallUtil",["$log",function(b){var c=this;c.getControlPosition=function(b){var c=null;return"string"!=typeof b&&null!=b?Object.keys(a.maps.ControlPosition).forEach(function(d){a.maps.ControlPosition[d]==b&&(c=d)}):c=b,c}}]).service("InfoWindow",["$log","$rootScope","$templateCache","$timeout","$http","$compile",function(b,c,d,e,f,g){function h(){function b(a){var b=c.open;c.open=function(d,e){h=d,null!=d&&"function"==typeof d.openInfoWnd&&d.openInfoWnd(a,d,e,c,b)};var d=c.close;if(c.close=function(a){h&&("function"==typeof h.closeInfoWnd&&a===!0?h.closeInfoWnd(c,d):d.apply(c,[]))},g=!0,e.length>0){for(var f=0;f<e.length;f++)e[f](c);e=[]}}var c=this,e=[],g=!1,h=null;c.$ready=function(a){return g===!0&&a?void a(c):void(a&&e.push(a))},arguments[0]?arguments[0].templateUrl?f.get(arguments[0].templateUrl,{cache:d}).then(function(d){arguments[0].content=d.data,a.maps.InfoWindow.apply(c,arguments),b(d.data)}):arguments[0].content&&(a.maps.InfoWindow.apply(c,arguments),b(arguments[0].content)):a.maps.InfoWindow.apply(c,arguments)}return a&&(h.prototype=Object.create(a.maps.InfoWindow.prototype),h.prototype.constructor=h),h}])}(a,b),function(a){"use strict";a.module("LogicifyGMap").service("SmartCollection",[function(){function a(a){var c=this;Array.isArray(a)&&a.forEach(function(a,b){c.push(a)}),c._uid=b++;var d=[],e=[],f=c.push;c.push=function(){var a=Array.prototype.slice.call(arguments),b=f.apply(c,a);return a.forEach(function(a){d.forEach(function(b){b.apply(c,[a])})}),b};var g=c.pop;c.pop=function(){var a=Array.prototype.slice.call(arguments),b=g.apply(c,a);return e.forEach(function(a){a.apply(c,[b])}),b};var h=c.unshift;c.unshift=function(){var a=Array.prototype.slice.call(arguments),b=h.apply(c,a);return a.forEach(function(a){d.forEach(function(b){b.apply(c,[a])})}),b};c.shift;c.shift=function(){var a=Array.prototype.slice.call(arguments),b=h.apply(c,a);return e.forEach(function(a){a.apply(c,[b])}),b};var i=c.splice;c.splice=function(){var a=Array.prototype.slice.call(arguments),b=i.apply(c,a);return b.forEach(function(a){e.forEach(function(b){b.apply(c,[a])})}),b},c.removeQuietly=i,c.onRemoveItem=function(a){"function"==typeof a&&e.push(a)},c.onAddItem=function(a){"function"==typeof a&&d.push(a)}}var b=0;return a.prototype=Object.create(Array.prototype),a.prototype.constructor=a,a}])}(b)});